# =============================================================================
# rangebar-py mise configuration (Hub)
# =============================================================================
# This is the SSoT for environment variables and tools.
# Tasks are split into domain-specific files in .mise/tasks/
#
# Task files:
#   .mise/tasks/dev.toml      - fmt, lint, test, build
#   .mise/tasks/release.toml  - release workflow, platform builds
#   .mise/tasks/bench.toml    - benchmarking
#   .mise/tasks/prof.toml     - profiling
#   .mise/tasks/deps.toml     - dependency management
#   .mise/tasks/validate.toml - production validation
#   .mise/tasks/cache.toml    - ClickHouse cache
#   .mise/tasks/smoke.toml    - smoke tests
#   .mise/tasks/checksum.toml - checksum verification
#   .mise/tasks/diag.toml     - diagnostics
#   .mise/tasks/research.toml - research cache population

[env]
# =============================================================================
# SSoT: Minimum Thresholds by Asset Class (Issue #62)
# =============================================================================
# Values are in decimal basis points (dbps): 1000 dbps = 1%
RANGEBAR_CRYPTO_MIN_THRESHOLD = "1000"
RANGEBAR_FOREX_MIN_THRESHOLD = "50"
RANGEBAR_EQUITIES_MIN_THRESHOLD = "100"
RANGEBAR_UNKNOWN_MIN_THRESHOLD = "1"

# =============================================================================
# GitHub Account Isolation
# =============================================================================
GH_ACCOUNT = "terrylica"
GH_CONFIG_DIR = "{{ env.HOME }}/.config/gh/profiles/terrylica"
GH_TOKEN = "{{ read_file(path=env.HOME ~ '/.claude/.secrets/gh-token-terrylica') | trim }}"
GITHUB_TOKEN = "{{ read_file(path=env.HOME ~ '/.claude/.secrets/gh-token-terrylica') | trim }}"

# =============================================================================
# 1Password Configuration
# =============================================================================
OP_PYPI_ITEM = "djevteztvbcqgcm3yl4njkawjq"

# =============================================================================
# ClickHouse Cache Configuration
# =============================================================================
RANGEBAR_CH_HOSTS = "bigblack"
RANGEBAR_CH_PRIMARY = "bigblack"

# =============================================================================
# Build Configuration
# =============================================================================
BENCH_DATA_DIR = "{{ env.PWD }}/bench-data"
PROFILE_DATA_DIR = "{{ env.PWD }}/profile-data"

# =============================================================================
# Linux Build Configuration
# =============================================================================
LINUX_BUILD_STRATEGY = "zig"  # "zig" or "remote"
LINUX_BUILD_HOST = "bigblack"
LINUX_BUILD_USER = "tca"
LINUX_BUILD_DIR = "/tmp/rangebar-py-build"
LINUX_MATURIN_PROFILE = "wheel"
LINUX_MATURIN_COMPAT = "manylinux_2_17"
LINUX_MIN_DISK_GB = "5"
LINUX_MIN_RUST_VERSION = "1.90"
BUILD_LOCK_DIR = "/tmp/rangebar-py-locks"

# =============================================================================
# Tools
# =============================================================================

[tools]
python = "3.13"
rust = "1.90"
node = "22"
uv = "latest"
zig = "0.13"
"cargo:cargo-nextest" = "latest"
"cargo:cargo-deny" = "latest"
"cargo:cargo-outdated" = "latest"
"cargo:flamegraph" = "0.6"
"cargo:maturin" = "latest"

# =============================================================================
# Task Includes (Hub-and-Spoke)
# =============================================================================

[task_config]
includes = [
    ".mise/tasks/dev.toml",
    ".mise/tasks/release.toml",
    ".mise/tasks/bench.toml",
    ".mise/tasks/prof.toml",
    ".mise/tasks/deps.toml",
    ".mise/tasks/validate.toml",
    ".mise/tasks/cache.toml",
    ".mise/tasks/smoke.toml",
    ".mise/tasks/checksum.toml",
    ".mise/tasks/diag.toml",
    ".mise/tasks/research.toml",
]
